@using WebsiteBanHang.Models
@model List<ChiTietDonDatHang>


@{
    ViewBag.Title = "XemChiTietDonHang";
    Layout = "~/Views/Layout/SearchLayout.cshtml";
    string MaDDH = ViewBag.MaDDH;
}

<div id="chitiet" class="container mt-3">

    <h1 class="text-center">Chi tiết đơn hàng @MaDDH</h1>

    <table class="table table-light table-hover table-bordered " style="z-index:99999;">
        <thead>
            <tr>
                <th>STT</th>

                <th>Tên Sản Phẩm</th>
                <th>Hình Ảnh</th>
                <th>Số Lượng</th>
                <th>Đơn giá</th>
                <th>Đánh giá sản phẩm</th>
                @*<th>Thao Tác</th>*@

            </tr>
        </thead>
        <tbody>

            @foreach (var item in Model)
            {
                decimal? tien = item.DonGia;



                <tr>
                    <td>@item.MaChiTietDDH1</td>

                    <td>@item.TenSP</td>
                    <td><img class="img-report" src="@Url.Content("~/Content/images/"+item.SanPham.HinhAnh)" alt="Alternate Text" /></td>
                    <td>@item.SoLuong</td>

                    <td>@tien.Value.ToString("#,##0")</td>
                    <td style="display: none">
                        <input class="valDanhGia" data-id="@item.MaDDH" type="hidden" id="txb-idDDH" name="name" value="@item.MaChiTietDDH1" />
                    </td>


                 
                    <td>
                        <div class="stars">
                            <form action="">
                                <input data-start="5" class="star star-5" id="star-5" type="radio" name="star" />
                                <label class="star star-5" for="star-5"></label>
                                <input data-start="4" class="star star-4" id="star-4" type="radio" name="star" />
                                <label class="star star-4" for="star-4"></label>
                                <input data-start="3" class="star star-3" id="star-3" type="radio" name="star" />
                                <label class="star star-3" for="star-3"></label>
                                <input data-start="2" class="star star-2" id="star-2" type="radio" name="star" />
                                <label class="star star-2" for="star-2"></label>
                                <input data-start="1" class="star star-1" id="star-1" type="radio" name="star" />
                                <label class="star star-1" for="star-1"></label>
                            </form>
                        </div>
                        <form action="">
                            @*<div class="mb-3 mt-3">
                                <img style="width:50px" src="~/Content/images/no_img.png" alt="Alternate Text" />
                                <input type="file" name="name" value="" />
                            </div>*@
                            <div class="mb-3 mt-3">

                                <textarea placeholder="Hãy chia sẻ nhận xét cho sản phẩm này bạn nhé!" class="form-control" rows="5" id="comment" name="text"></textarea>
                            </div>
                          
                        </form>

                    </td>

                    


                </tr>
                <tr> 
                     <td colspan="6">
                        <button type="submit" class="btn btn-primary float-end">Gửi đánh giá</button>
                    </td>
                </tr>


            }

        </tbody>
    </table>
</div>
<style>
    .img-report {
        width: 250px;
    }
    div.stars {
      
        display: inline-block;
    }

    input.star {
        display: none;
    }

    label.star {
        float: right;
        padding: 10px;
        font-size: 13px;
        color: #444;
        transition: all .2s;
    }

    input.star:checked ~ label.star:before {
        content: '\f005';
        color: #FD4;
        transition: all .25s;
    }

    input.star-5:checked ~ label.star:before {
        color: #FE7;
        text-shadow: 0 0 20px #952;
    }

    input.star-1:checked ~ label.star:before {
        color: #F62;
    }

    label.star:hover {
        transform: rotate(-15deg) scale(1.3);
    }

    label.star:before {
        content: '\f006';
        font-family: FontAwesome;
    }


    /*div.stars {
        display: inline-block;
    }

    input.star {
        display: none;
    }

    p.star {
        float: right;
        padding: 10px;
        font-size: 13px;
        color: #444;
        transition: all .2s;
    }*/
        /*
    input.star:checked ~ label.star:before {
        content: '\f005';
        color: #FD4;
        transition: all .25s;
    }*/

        /*   input.star-5:checked ~ label.star:before {
        color: #FE7;
        text-shadow: 0 0 20px #952;
    }

    input.star-1:checked ~ label.star:before {
        color: #F62;
    }*/

        /*p.star:hover {
            transform: rotate(-15deg) scale(1.3);
        }*/

    /* p.star:before {
        content: '\f006';
        font-family: FontAwesome;
    }*/

</style>
<script>
   
    $(".star").click(function () {
        var start = $(this).attr("data-start")
       
        console.log(start)
        //Swal.fire({
        //    title: 'Đánh giá sản phẩm',
        //    text: "Bạn đã chắc chắn với đánh giá của mình?",
        //    icon: 'warning',
        //    showCancelButton: true,
        //    confirmButtonColor: '#3085d6',
        //    cancelButtonColor: '#d33',
        //    confirmButtonText: 'Yes'
        //}).then((result) => {
        //    if (result.isConfirmed) {

        //        var start = $(this).attr("data-start")
        //        var MaCTDDH = $(".valDanhGia").val();
        //        console.log(start)

        //        $.ajax({
        //            type: "get",

        //            url: "http://localhost:62979/DonHang/evaluateProduct?MaCTDDH=" + MaCTDDH + "&star=" + start,
        //            contentType: "json",

        //            success: function (status, data) {
        //                console.log("status", status)
        //                console.log("data", data)
        //                for (var i = 1; i <= start; i++) {
        //                    $("." + i).empty();
        //                    $("." + i).prepend('<i style="color:#FD4" class="fa  fa-star "></i>');
        //                }
        //                Swal.fire(
        //                    'Thành công!',
        //                    'Đánh giá của bạn đã góp phần giúp shop chúng tôi ngày càng phát triển tốt hơn.',
        //                    'success'
        //                )

        //            }
        //        })


        //    }
        //})



    })


</script>

