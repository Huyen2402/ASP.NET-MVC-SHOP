@using WebsiteBanHang.Models;
@model IEnumerable<SanPham>

@{ 
    FlashSale fl = ViewBag.Day as FlashSale;
}
<div class="content-top container flash-sale">

    @*<div>
        <strong>
            Nhập thông tin ban đầu: <br />
        </strong>
        <input type="text" id="h_val" placeholder="Giờ" value="" /> <br />
        <input type="text" id="m_val" placeholder="Phút" value="" /> <br />
        <input type="text" id="s_val" placeholder="Giây" value="" />
        <input type="button" value="Start" onclick="start()" />
        <input type="button" value="Stop" onclick="stop()" />  <br /> <br />
    </div>*@


    <h1>Flash Sale</h1>
    <a href="@Url.Action("ViewAllFlashSale","SanPham")" id="view-all">Xem tất cả</a>
    <div id="time-flash-sale">
        <span class="time" id="days">Ngảy</span> :
        <span class="time" id="hours">Giờ</span> :
        <span class="time" id="minutes">Phút</span> :
        <span class="time" id="seconds">Giây</span>
    </div>
    <div class="grid-in">
        <input id="time" type="hidden" name="name" value="@fl.EndTime" />
        @foreach (var item in Model)
        {
            <input type="hidden" name="name" value="" id="@item.MaShop" />

            <div class="col-2 col-xs-12 grid-top ">
                <a href="@Url.Action("XemChiTietSP","SanPham", new {@id=item.MaSP, item.MaShop})" class="b-link-stripe b-animate-go  thickbox">
                    <img class="img-responsive" src="@Url.Content("~/Content/images/"+item.HinhAnh)" alt="">
                    <div class="b-wrapper">
                        <h3 class="b-animate b-from-left    b-delay03 ">
                            <span>@item.MoTaNgan</span>
                        </h3>
                    </div>
                </a>


                <p><a href="single.html">@item.TenSP</a></p>
            </div>



        }
    </div>
    <div class="clearfix"></div>
</div>

<style>
    .time {
        border: solid 1px #ACACAC;
        padding: 2px;
    }
    #time-flash-sale, #view-all {
        display: flex;
        justify-content: flex-end;
        
        margin-right: 70px;
    }
</style>
<script language="javascript">

    var val = document.getElementById("time").value
    console.log(val)
    var ngay = val.slice(0, 10)
    var gio = val.slice(11,19)
    console.log(ngay)
    console.log(gio)
    const myArray = ngay.split("/");
    const myArray2 = gio.split(":");
    console.log(myArray)
    console.log(myArray2)
    var day = myArray[1]; // Giờ
    var month = myArray[0]; // Phút
    var year = myArray[2]; // Giây
    console.log(month)
    var hour = myArray2[0]
    var phut = myArray2[1]
    var giay = myArray2[2]
    

    
        function makeTimer() {

         /*   		var endTime = new Date("29 April 2018 9:56:00 GMT+01:00");*/
            var endTime = new Date(year + "," + month + "," + day + " " + hour + ": " + phut + ": " + giay + " ");
            console.log(endTime)

        endTime = (Date.parse(endTime) / 1000);
        var now = new Date();
        now = (Date.parse(now) / 1000);

        var timeLeft = endTime - now;

        var days = Math.floor(timeLeft / 86400);
        var hours = Math.floor((timeLeft - (days * 86400)) / 3600);
        var minutes = Math.floor((timeLeft - (days * 86400) - (hours * 3600)) / 60);
        var seconds = Math.floor((timeLeft - (days * 86400) - (hours * 3600) - (minutes * 60)));

        if (hours < "10") {hours = "0" + hours; }
        if (minutes < "10") {minutes = "0" + minutes; }
        if (seconds < "10") {seconds = "0" + seconds; }

        $("#days").html(days + "<span>Days</span>");
        $("#hours").html(hours + "<span>Hours</span>");
        $("#minutes").html(minutes + "<span>Minutes</span>");
        $("#seconds").html(seconds + "<span>Seconds</span>");

    }

        setInterval(function () {makeTimer(); }, 1000);

</script>
